ğŸ“… RELATO DE DESENVOLVIMENTO DO SCRAPER IMOBILIÃRIO â€“ 3 DIAS
âœ… Dia 1 â€“ InÃ­cio do projeto e primeira estrutura (terÃ§a-feira)
ğŸ¯ Objetivo definido:
Criar um sistema de webscraping para coletar dados de imÃ³veis em sites portugueses, com foco inicial no Idealista, e visÃ£o futura de incluir notÃ­cias e dados complementares.

ğŸ› ï¸ O que foi feito:
Estruturamos o projeto com:

Um arquivo main.py

Um mÃ³dulo de scrapers (scrapers/idealista.py)

Primeira tentativa de scraping com:

python
Copiar
Editar
import requests
from bs4 import BeautifulSoup
âŒ Problema:
NÃ£o retornou nenhum imÃ³vel.

A estrutura HTML carregada pelo requests nÃ£o continha os imÃ³veis visÃ­veis no site.

ğŸ“Œ Causa:
O Idealista carrega seu conteÃºdo dinamicamente via JavaScript, o que nÃ£o Ã© interpretado pelo requests.

âœ… SoluÃ§Ã£o:
Migramos para o Selenium, que simula um navegador real e renderiza o JS da pÃ¡gina.

âœ… Dia 2 â€“ Selenium e scraping funcional no Idealista (quarta-feira de manhÃ£)
ğŸ§ª Primeiros testes com Selenium:
Usamos webdriver.Chrome() com ChromeDriverManager para automatizar o navegador.

Adicionamos um clique automÃ¡tico para aceitar os cookies:

python
Copiar
Editar
By.ID, "didomi-notice-agree-button"
âœ… Resultado:
ImÃ³veis foram encontrados corretamente.

Dados de tÃ­tulo, preÃ§o e link extraÃ­dos.

Dados salvos em CSV com sucesso.

âŒ Problemas enfrentados:
ApÃ³s alguns testes, o Idealista passou a mostrar um CAPTCHA de puzzle.

O site detectou que o navegador era automatizado.

âœ… SoluÃ§Ãµes consideradas:
Usar undetected-chromedriver (para evitar detecÃ§Ã£o de bots).

Inserimos time.sleep() para permitir que o usuÃ¡rio resolva o CAPTCHA manualmente.

âœ… Dia 3 â€“ ExpansÃ£o para mÃºltiplos sites (quinta-feira de manhÃ£)
ğŸŒ Objetivo:
Adaptar o scraper para funcionar tambÃ©m com OLX e Imovirtual.

Tornar o cÃ³digo reutilizÃ¡vel com:

python
Copiar
Editar
def scrape(site):
    ...
ğŸŸ  Tentativa com OLX:
Corrigimos a URL manualmente.

HTML do OLX era diferente do Idealista â†’ criamos novos seletores.

Resultado: scraping funcional com blocos div[data-cy='l-card'].

ğŸ”µ Tentativa com Imovirtual:
Usamos Selenium para abrir a pÃ¡gina de apartamentos em Lisboa.

VÃ¡rios seletores testados falharam (h2, p[data-cy='listing-item-price']).

O conteÃºdo do Imovirtual tambÃ©m Ã© carregado dinamicamente por JS.

âŒ Problemas:
no such element nos preÃ§os e tÃ­tulos.

HTML diferente entre a navegaÃ§Ã£o manual e a DOM que o Selenium acessa.

âœ… SoluÃ§Ã£o final para Imovirtual:
Em vez de procurar um seletor exato, pegamos o .text do link e extraÃ­mos o preÃ§o de qualquer linha com "â‚¬".

python
Copiar
Editar
texto = anuncio.text
preco = next((linha for linha in texto.split("\n") if "â‚¬" in linha), "PreÃ§o nÃ£o encontrado")
âœ… Resultado:
Scraper 100% funcional no Imovirtual.

Salvando os dados corretamente no imovirtual_imoveis.csv.

ğŸ§  ConclusÃ£o geral (pra fechar quinta-feira)
O projeto cresceu de uma simples ideia de requests + bs4 para um sistema robusto com Selenium.

Aprendemos a lidar com pÃ¡ginas que usam JavaScript pesado.

Implementamos estratÃ©gias para:

Renderizar dinamicamente

Lidar com CAPTCHAs

Adaptar o scraping Ã  estrutura de cada site

Agora temos:

Scraper modular

Idealista funcionando

Imovirtual funcionando

OLX pronto para expandir

Suporte a outros sites e fontes futuras (notÃ­cias, dados pÃºblicos)

ğŸ—£ï¸ Dica de como apresentar:
Quarta de manhÃ£:
â€œOntem comeÃ§amos o projeto tentando usar requests e BeautifulSoup, mas vimos que o Idealista carrega o conteÃºdo com JavaScript. Isso nos levou a usar Selenium, onde conseguimos finalmente coletar os imÃ³veis. TambÃ©m aprendemos a lidar com pop-ups de cookies e comeÃ§amos a pensar numa estrutura que permitisse adaptar para outros sites."

Quinta de manhÃ£:
â€œHoje evoluÃ­mos o scraper para funcionar com OLX e Imovirtual. Encontramos dificuldades com a estrutura dinÃ¢mica do Imovirtual, mas resolvemos de forma criativa: lendo o texto completo do card e extraindo o preÃ§o com base em conteÃºdo. Agora temos um sistema modular, preparado para mÃºltiplas fontes e fÃ¡cil de manter."